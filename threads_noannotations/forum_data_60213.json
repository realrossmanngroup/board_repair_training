[
    {
        "post_id":66937,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-22 03:18:58",
        "message":"I have 820-00239 board which is working perfectly only with keyboard flex disconnected. Customer says, that computer was dropped. In most cases when I plug keyboard flex in (J4500) computer starts, shows Apple logo, loads system halfway and shuts down. Sometimes it lets me to write password, I can get to OS, but few seconds later it restarts. After disconnecting keyboard it works perfectly for hours. I took it to Apple, it got topcase and keyboard replaced but it hasn't solved problem. As there are fan power and data lines I've disconnected them from keyboard and tried without them - the same result. I've inspected board for damages, but haven't found any. It seems that keyboard flex causes problem on some communication line, but schematic doesn't help at all. \n\nDiode mode readings of J4500 with everything disconnected from the board:\n\nPP5V_S0_FAN_CONN - 0,431v\nFAN_RT_TACH - OL\nFAN_LT_TACH - OL\nFAN_RT_PWM - 0,496v\nFAN_LT_PWM - 0,496v\nPP5V_S0_KBD - 0,430v\nKBD_I2C_SDA - OL\nKBD_INT_L - OL\nKBD_I2C_SCL - OL\nSMC_LSCO_RST_L - 0,707v (when board turned on gets 3,3v both with and without keyboard)\nKBD_BLC_GSSCK - OL\nKBD_BLC_GSSOUT - OL\nKBD_BLC_GSLAT - OL\nKBD_GLC_GSSIN - OL\nKBD_GLC_XBLANK - OL\nPP3V3_S4 - 0,315v\n\nDiode mode readings of J4500 with keyboard connected:\n\nPP5V_S0_FAN_CONN - 0,410v\nFAN_RT_TACH - 0,406v\nFAN_LT_TACH - 0,410v\nFAN_RT_PWM - 0,496v\nFAN_RT_PWM - 0,496v\nPP5V_S0_KBD - 0,412v\nKBD_I2C_SDA - 0,421v\nKBD_INT_L - 0,550v\nKBD_I2C_SCL - 0,554v\nSMC_LSCO_RST_L - 0,434v\nKBD_BLC_GSSCK - 0,676v\nKBD_BLC_GSSOUT - 0,491v\nKBD_BLC_GSLAT - 0,675v\nKBD_GLC_GSSIN - 0,676v\nKBD_GLC_XBLANK - 0,675v\nPP3V3_S4 - 0,315v\n\nI have also checked J4501, everything looks OK there. As I haven't found any chip on the board related to keyboard controll I understand, that it should be somewhere on keyboard itself, but I think it's not the problem here. The problem seems to be related to communication between board and keyboard, but I don't know where to look. Does SMC have any role here as there are comunication lines in connector?"
    },
    {
        "post_id":66960,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-10-22 12:32:59",
        "message":"SMC_LSOC_RST_L must be always high.\nCheck R5258, U5256 and traces.\nCan also be a problem underneath keyboard connector.\n\nSMC_ONOFF_L is steady 3V?"
    },
    {
        "post_id":67002,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-23 02:20:29",
        "message":"SMC_LSOC_RST_L is always 3,3v, no matter with or without keyboard connected. \nSMC_ONOFF_L steady 3,4v\nAll voltages on U5256 are present, only SMC_4FINGERS_RST is 0v\n\nKeyboard connector is well soldered, on the other side of the boar there are only Q6000\/Q6050 with some caps and resistos, they all look and measure good."
    },
    {
        "post_id":67010,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-10-23 08:20:23",
        "message":"\" SMC_LSCO_RST_L - 0,707v (when board turned on gets 3,3v both with and without keyboard)\n----------------------\nSMC_LSOC_RST_L is always 3,3v, no matter with or without keyboard connected\"\nCan you clarify, please???\nOf course, interests this signal when board doesn't boot."
    },
    {
        "post_id":67018,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-23 08:36:15",
        "message":"[QUOTE=\"2informaticos, post: 67010, member: 682\"]\nSMC_LSCO_RST_L - 0,707v\n[\/QUOTE]\nThis is reading in diode mode. \n\nI get constant 3,3volt on this line when board starts, no matter if keyboard is connected or not."
    },
    {
        "post_id":67028,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-10-23 09:59:06",
        "message":"\"only SMC_4FINGERS_RST is 0v\"\nIs correct; note that it doesn't have the \"_L\" on its name.\n\nKeyboard data lines go to trackpad, J4500 -> J4501.\nOnly fans connect directly with the MLB.\n\nTrackpad flex\/board changed?"
    },
    {
        "post_id":67033,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-23 10:51:01",
        "message":"The whole topcase was replaced by Apple. I\u2019ve asked them for details which parts they left there from old topcase and they have replaced everything except board, screws and Touch ID, so trackpad flex and board were replaced too."
    },
    {
        "post_id":67049,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-10-23 13:47:13",
        "message":"Connect keyboard, disconnect TouchID and check how it works."
    },
    {
        "post_id":67051,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-23 14:28:54",
        "message":"I\u2019ve tried it, no changes. I connect only display and keyboard, board restarts while booting system. Even with everything connected to board except keyboard, it works perfectly. There are KBD_I2C_SDA and KBD_I2C_SCL lines in connector. I wonder, where are they going to\/coming from? Between which parts is this communication going? Schematic is really poor with information about it, like they forgot to finish it."
    },
    {
        "post_id":67055,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-10-23 17:03:14",
        "message":"Keyboard matrix information (key pressed) comes through I2C bus (J4500) and goes to trackpad (J4501).\nFinaly, keyboard information goes to PCH via SPI, along with trackpad information."
    },
    {
        "post_id":67062,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-24 02:08:22",
        "message":"I see, thank you for explanation. I will check more carefully J4501 and inspect the areas under it. Also will check continuity of traces between J4500 and J4501. Would you dig into this board or it seems hopeless?"
    },
    {
        "post_id":67122,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-26 06:28:27",
        "message":"I have checked continuity of traces between J4500 and J4501, they are OK. Also checked resistors and traces from J4501. I've reflowed SMC with no effect. I have no idea what else I can do.. Computer even can't be used with keyboard disconnected because it won't have working fans."
    },
    {
        "post_id":67197,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-28 04:14:03",
        "message":"[USER=682]@2informaticos[\/USER], do you have any ideas?"
    },
    {
        "post_id":67210,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-10-28 11:54:12",
        "message":"Machine still restarts with keyboard connected, but trackpad disconnected?"
    },
    {
        "post_id":67216,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-28 12:23:15",
        "message":"Exactly, it was restarting all the time during boot. But today for example in most cases board doesn\u2019t even try to start with keyboard connected."
    },
    {
        "post_id":67234,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-10-28 16:59:40",
        "message":"Then the problem is not with keyboard matrix.\nShould be something related with the fans, or keyboard backlight circuit.\nAre you sure Apple changed all the mentioned things?\nI don't understand why they changed all these things and returned machine as non working, really strange.\n\nJust be sure SMC_LSOC_RST_L stays high."
    },
    {
        "post_id":67246,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-29 03:17:32",
        "message":"[QUOTE=\"2informaticos, post: 67234, member: 682\"]\nAre you sure Apple changed all the mentioned things?\n[\/QUOTE]\n\nI'm sure they have replaced complete topcase. Only things they left are motherboard, Touch ID, display and screws. They have replaced topcase under keyboard replacement program, but as computer already doesn't have warranty, they left it like that and said, that motherboard needs to be replaced too.\n\n[QUOTE=\"2informaticos, post: 67234, member: 682\"]\nShould be something related with the fans, or keyboard backlight circuit.\n[\/QUOTE]\n\nI have disconnected both fans from keyboard and removed Q6000 and Q6050 - no changes. Will take a look at backlight circuit,\n\n[QUOTE=\"2informaticos, post: 67234, member: 682\"]\nJust be sure SMC_LSOC_RST_L stays high.\n[\/QUOTE]\n\nIt's always hight, 3,4v."
    },
    {
        "post_id":67253,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-10-29 04:27:37",
        "message":"I started isolating pins in J4500 with capton tape and discovered, that when i isolate upper row of pins in connector, board boots fine. Then I isolated left\/right half of pins, it turned out, that with right side of upper pins isolated board boots fine. I started isolating each pin separately and narrowed it down to KBD_I2C_SDA. With this pin isolated (no matter on J4500 or J4501) and both keyboard and trackpad flex connected board boots fine, but obviously keyboard doesn't work. With only keyboard flex connected board doesn't start at all."
    },
    {
        "post_id":67261,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-10-29 10:07:17",
        "message":"Get another keyboard for test..."
    },
    {
        "post_id":68255,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-11-24 03:34:34",
        "message":"[USER=682]@2informaticos[\/USER], in meanwhile got the same mac model for repair with another issue and used occasion to swap the boards. This keboard with other board works fine. I put the board to another topcase with fully working keyboard and keyboard doesn't work. So the problemis related to mainboard itself.."
    },
    {
        "post_id":68274,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-11-24 10:43:47",
        "message":"\"With only keyboard flex connected board doesn't start at all.\"\nBoard doesn't start by itself then (when  connecting charger)?"
    },
    {
        "post_id":68417,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-11-26 07:47:38",
        "message":"No, it doesn't start at all. When I connect tracpad flex, it shows Apple logo and loads halfway, then shuts down."
    },
    {
        "post_id":68422,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-11-26 09:37:36",
        "message":"\"No, it doesn't start at all\"\nIf battery is not connected, board MUST start by itself when connect charger..."
    },
    {
        "post_id":68472,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-11-27 07:45:04",
        "message":"You are right, it should be like this, but in this case, when I leave only keyboard (and LCD) connected to board it doesn't start. I mean - on the amp meter I can see, that board is trying to start, it takes 0,8A for 5 seconds then it drops to 0,05A and it loops. If I disconnect keyboard - board starts, shows image, loads system. If I connect keyboard and trackpad together, board starts, shows Apple logo, loads system halfway and shuts down."
    },
    {
        "post_id":68480,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":682,
        "username":"2informaticos",
        "post_date":"2020-11-27 12:07:23",
        "message":"Disconnect internal LCD and test with external monitor and only keyboard\/trackpad connected."
    },
    {
        "post_id":68541,
        "thread_id":60213,
        "title":"820-00239 works only with keyboard disconnected",
        "user_id":1427,
        "username":"Narek",
        "post_date":"2020-11-30 05:52:23",
        "message":"It behaves the same with internal LCD disconnected. With only keyboard connected, it triest to start, but shuts down after 5 seconds, with only trackpad connected it starts and boots normally, with both connected it starts, loads system halfway and restarts."
    }
]