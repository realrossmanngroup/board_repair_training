{"post_id":59596,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-14 19:02:50","message":"I have the above which had mild liquid damage around the board which has now been fix and the logicboard is working but my problem is the battery.\n\nIt will work with both the power lead and battery connected or just the power lead but if I pull the power lead out with the battery connected it turns off. \n\nIn the OS it shows a percentage and say's it charging. If I go to system under power, it says that the battery is connected and charging. If I leave the power lead connected you can see the percentage going up. \n\nAt first, after measuring around the board, what seems to be missing are the SMBUS_BATT_SCL, SMBUS_BATT_SDA and SYS_DETECT_L. So I thought it was the SMC, but with the SMC showing the correct information when it's in the system profile then, I've ruled this out for the time being. After more digging around I found that I was missing PP3V3_G3H on the battery alone. and to be more specific PM_EN_P3V3_G3H which comes from U7000. I replaced this, but it made no difference.\n\nSo now i'm stuck, I know PM_EN_P3V3_G3H is created by U7000 but there must be something else externally that switches that on.\n\nOne last thing I have noticed with just the battery connected PM_EN_P3V3_G3H if fluctuating between 0.3v-0.6v, PPBUS is showing 11.45v\n\nAny pointer in the right direction"}
{"post_id":59601,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 04:18:16","message":"Replace R6905..."}
{"post_id":59603,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 05:24:46","message":"Hi, tried that and no difference. initially after changing R6905 I have 0v on P3V3_G3H.\nAfter connecting the power lead and then removing it with the battery still connected P3V3_G3H dropped to ~1.8v - ~1.7v fluctuating and slowly dropping to now after typing this to ~1.3v - ~1.2v."}
{"post_id":59604,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 05:44:50","message":"Post C6990 and R6991 voltage on battery only."}
{"post_id":59607,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 07:20:53","message":"Battery connected\nC6990 is 11.51v\nR6991 is 0v\n\nPower lead connected then disconnect (battery connected)\n\nC6990 - 11.51v\nR6991 - 0.54 - 0.32 fluctuating"}
{"post_id":59610,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 08:19:55","message":"Change U7000, looks like doesn't want to enable 3V3_G3H on battery only."}
{"post_id":59613,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 08:55:41","message":"Sorry I forgot to mention that I've replaced the U7000 twice. Not sure it these are reballed cheap Chinese or if they are genuine. Is there any other factors that are needed to enable PM_EN_P3V3_G3H voltage signal to come from the U7000."}
{"post_id":59614,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 09:11:37","message":"Try another battery, even old.\nCheck voltage and diode mode to ground on SCL\/SDA lines of battery bus.\nLooks like SMC communicates with battery and U7000, but check values.\n\nDo you have any voltage at R7075 with battery only?"}
{"post_id":59618,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 09:45:46","message":"Tried another battery still the same.\n\nThere is no comms on the SCL\/SDA lines and I wouldn't have thought there would be as there's no P3V3_G3H so surly the SMC isn't even being powered.\n\nI just don't know if there is any communication between the CD3215 and the U7000 which then turns on the PM_EN_P3V3_G3H which then gives 3.3 volts that then turns on the SMC for comms with the battery. That's what in thinking but I could be wrong."}
{"post_id":59620,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 10:19:10","message":"You don't need power on board to check diode mode to grounbd on signal lines.\nAnd wanted to know the voltage on SCL\/SDA lines with charger connected, of course.\n\nU7000 doesn't need to talk with CD3215, nor SMC, to enable 3V3_G3H; valid thing for battery mode only.\nIn fact, SMC cannot wake up if 3V3_G3H is not generated first."}
{"post_id":59623,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 11:04:57","message":"R7075 battery only - 11v\n\nvoltage with battery and power lead connected taken at SMC \n\nSCL - 3.4v - same at J6951\nSDA - 3.4v - same at J6951\n\nVoltage after taking power lead off with battery connected\n\nSCL - 1.9v - fluctuating\nSDA - 1.9v - fluctuating \n\nDiode mode reading\n\nSCL - 0.40\nSDA - 0.40"}
{"post_id":59624,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 11:34:00","message":"\"R7075 battery only - 11v \"\nPost voltage with charger only and also charger plus battery..."}
{"post_id":59626,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 11:43:40","message":"R7075 with charger and battery is 19.8v\n\nR7075 charger only is same 19.8v"}
{"post_id":59631,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 14:40:32","message":"Definitely not U7000 or the SMC, ive just removed both from working board and reball them onto this piece of cr*p and the measurements are the same"}
{"post_id":59632,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 15:42:52","message":"I don't know where you measure.\nR7075 must have 5V on both sides...\nYour values points to bad U7000.\nWhich is the exact PPBUS_G3H voltage with charger only?"}
{"post_id":59638,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 16:51:21","message":"Sorry wrong reading R7075 gives 0v with battery and 5v with both"}
{"post_id":59641,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 17:22:04","message":"OK, time to make a test.\nRemove R6991 and inject 5V (externally) at its pad 1; going to U6990.\nCheck if then board works on battery alone."}
{"post_id":59642,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 17:38:18","message":"Yes \u2026 both SCL\/SDA lines are 3.4v and I've just installed back into the case and using the battery and applying 5v to R6991 i'm able to make it work by pressing the power button."}
{"post_id":59645,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 18:44:56","message":"So, for some reason U7000 doesn't want to enable 3V3_G3H power supply on battery only.\nBe sure Q7040\/65 are good.\nCompare voltages around U7000 in battery mode with a good board.\nAlso compare diode mode readings."}
{"post_id":59647,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 19:27:36","message":"Already replaced both Q7040\/65... \n\nI don't have any working boards as I've taken the SMC and U7000 from it and the other U7000 decided to play hide and seek :)\n\nSo do you think that there is another component that tells the U7000 to switches between power lead and battery? I know on the older models it was automatic but with the U6990 having the enable maybe there's another component involved.\n\nThanks for your help so far. Please don't give up yet :)"}
{"post_id":59648,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":682,"username":"2informaticos","post_date":"2020-05-15 19:34:37","message":"You can compare with different board model, which also has ISL9239; is the same schematic.\nU7000 is supposed to enable 3V3_G3H directly.\nCheck all resistors around it.\nDirect comparison of diode mode and voltages with good board should help.\nDid you try to reflow it?"}
{"post_id":59650,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-15 20:16:23","message":"Reflow ISL? I've replaced it 3 times now...\n\nI'll do that tomorrow, it's getting late.."}
{"post_id":59662,"thread_id":59336,"title":"820-00840 not working from the battery [SOLVED]","user_id":1509,"username":"Kappy","post_date":"2020-05-16 06:56:31","message":"So I've now checked all voltages and diode modes around the U7000 and I've found the problem. C7078 was only showing 0.2v with the battery alone. After checking D6905 and that having 11.2v I ran a wire between them both and HEY PRESTO battery now works!!!\n\nThank you for your help and support"}
