{"post_id":67257,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-10-29 11:27:13","message":"Not a company just doing this as hobby project.\n\na1707 was stuck on 5v, I replaced c6906 and c6905 caps, because of my bad soldering I had only soldered the c6905 cap on one side, but this made the board run on 20v. It turned on works fine, when connecting battery and the battery ribbon it would just power cycle on when reaching 10v.\n\nI resoldered the c6905 cap.  Now I have a board that struggles :\n\n20v only kicks in after a while.\n\n\ncap connected:  (5v for good 2 minutes)\nPPVIN_G3H_P3V3G3H: 3.8v\nPPDCIN_G3H_CHGR_R: 5v\nPPBUS_G3H_R: 0.6V\n\n(20v stage)\nPPVIN_G3H_P3V3G3H: 20v\n\n20v takes time to kick in, sometimes minutes. When I connect the battery ribbon the board power cycles the second the voltage reaches 10v, and power cycles over and over. The laptop works without a battery but I specially bought a new battery from ebay as the old one was bulged up.\n\nI ripped the d6902 pad but I soldered d6902-d6906-d6905 together as they are on the same ppvin_g3h_p3v3g3h rail."}
{"post_id":67258,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-10-29 11:52:52","message":"Can you post 820-xxxxx code?\n\nDo not trust new chinese batteries.\nTry to get an original old one, just for test."}
{"post_id":67262,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-10-29 12:16:52","message":"820-00281a. seller claimed the battery is OEM, but it seems to be chinese OEM, I will look if I can find something else."}
{"post_id":67354,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-10-31 18:01:42","message":"I had the seller send me a free replacement. Anything more I can measure while I wait for it to arrive?"}
{"post_id":67359,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-11-01 02:34:26","message":"Same seller, same \"quality\" probably.\nYou should get a known good battery, just for test."}
{"post_id":67796,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-11-11 13:28:02","message":"got the fake battery and a macbook top with a used old battery. before I had chance to test any of it I realized that the 20v is not kicking in without the battery anyways. \n\nppvin_g3h_p3v3g3h is 3.6v\nu6903 enable is 4.5v\nSMC_RESET_L and BUF_SMC_RESET_L = 3.4V \nPP3V3_G3H_REG_R= 3.418 v \nPPBUS_G3H_R 0v\nPPBUS_G3H 0v\nPPDCIN_G3H_CHGR_R = 5.197 v\nPP1V8_UPC_TA_LDOA 1.8v\nPP1V8_UPC_TB_LDOA 1.8v\nPP1V8_UPC_XA_LDOA 1.8v\nPP1V8_UPC_XB_LDOA 1.8v"}
{"post_id":67801,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-11-11 15:43:45","message":"Check if R6920 has 0 ohm; post its voltage too.\n\n\"ppvin_g3h_p3v3g3h is 3.6v \"\nPost diode mode to ground."}
{"post_id":67804,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-11-11 16:05:03","message":"R6920  is 0.8ohm, both sides are identically 3.4v\n\nI get open circuit on  ppvin_g3h_p3v3g3h, thats the part where I was soldering...\n\nI wonder if I blasted the   2.2UF 20% 35V X5R capacitors when soldering them"}
{"post_id":67814,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-11-12 03:09:18","message":"\"PPDCIN_G3H_CHGR_R = [B][U]5.197 v[\/U][\/B]\n------------------\nR6920  is 0.8ohm, both sides are identically [B][U]3.4v[\/U][\/B]\"\nLook at schematic and post accurate information."}
{"post_id":67823,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-11-12 10:39:48","message":"my bad  R6920  is 0.3ohm and 5.2v on both sides"}
{"post_id":67839,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-11-12 15:20:30","message":"\"ppvin_g3h_p3v3g3h is 3.6v\"\nStill the same?\nIf yes, chgange the diode...\n\n\"Post diode mode to ground.\"\nIf you have time..."}
{"post_id":67844,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-11-12 15:59:27","message":"ppvin_g3h_p3v3g3h still 3.6v \ndiode mode to ground is 0.55v from all 3 pins of d6902 before change\n\nI will source and replace the d6902 BAT30CWFILM and report back"}
{"post_id":69107,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-13 15:16:35","message":"Replaced D6902,\n\nIt made 20v work without battery, with battery it still power cycles :(\n\nI just want to remind you that I destroyed the pad under pin3 as mentioned in the first post, so I had to wire\nD6902 pin3 <-> pin1 c6906\nD6902 pin3 <-> pin1 c6905\n\n\nMeasurements:\nD6902\npin1 20v\npin2 12v\npin3 20v\n\nand its 0.5v from D6902 pin1,2,3 to ground\n\nc7042 pin1 (ppcdin_g3h_chgr) is 20v.\n\nc6905 pin1 20v"}
{"post_id":69113,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-14 06:09:02","message":"Do you get correct PPBUS_G3H voltage without battery connected?"}
{"post_id":69140,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-14 13:23:01","message":"I get 12.7V on PPBUS_G3H without the battery"}
{"post_id":69143,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-14 14:43:49","message":"And board stays in S5 with charger alone?\nDoesn't boot, no S3, or S0 voltages at all?"}
{"post_id":69149,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-14 15:13:49","message":"The laptop boots with charger alone, it's usable. I can login etc\n\nBut with battery it keep cycling between trying to go from 5v to 20v (my meter says it dies on 10v)"}
{"post_id":69167,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-15 06:55:37","message":"Then try known good battery..."}
{"post_id":69171,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-15 07:03:00","message":"Yes I have tried with the used known battery that came glued in with a top case, and 2 ebay batteries. They all have the same problem. It only happens when I connect the ribbon so it might be a lithium security cutout?"}
{"post_id":69173,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-15 07:05:02","message":"Try to start in SMC byapss mode, as safe mode too.\nCan you start with battery alone?"}
{"post_id":69175,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-15 07:57:03","message":"Just battery SMC bypass without charger does not work,\n\nBattery with charger (and battery ribbon) SMC bypass. It starts, errors out first 1-2x, then it boots normally but I cant see the battery show up anywhere but this can be because of the bypass. If I disconnect the charger the battery holds the laptop alive.\n\nI added the error below that I get before it launches.\n\n\nI will test more later today\n\nEdit: it works without charger only using battery in smc bypass\nEDIT2: did a smc reset, it powered on without smc bypass and charger, sitting at 45%. Will have to test it more\nedit3: it wont charge drawing 0.14a , unplugging made it turn off. And its back to power cycling"}
{"post_id":69271,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-18 05:41:08","message":"Any idea? can all the batteries be bad? or the board?"}
{"post_id":69285,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-18 07:18:49","message":"The best thing is testing with \"known good worling\" battery.\n\nIf I correctly understood from your last post, the machine always start booting with battery alone?\nIt doesn't boot with charger alone, or charger and battery both connected?"}
{"post_id":69308,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-19 12:19:28","message":"The machine always boots with charger alone\nDoes not boot with battery only\nOnly boots with battery and charger in smc bypass mode"}
{"post_id":69312,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-19 13:38:46","message":"Check CHGR_A\/BMON levels, with both charger and battery connected."}
{"post_id":69344,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-19 17:27:46","message":"The charger cycles between trying to switch from 5v to 12v with battery.  CHGR_A\/BMON are 0v.\n\nI found something accidentally,\n1. starting MacBook without battery ribbon with charger.\n2. I turn on the laptop.\n3. I connect the battery ribbon (while it's starting) and the battery reports the right charge percentage and charges at 3A 20v.\n4. I disconnect the charger.\n5. laptop keeps alive\n6. connect the charger back.\n7. Laptop dies.\n\nI measured CHGR_AMON was 0.5v in this case and BMON 0v."}
{"post_id":69345,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-19 17:36:43","message":"Start with charger and battery properly connected in SMC bypass mode.\nThen post CHGR_A\/BMON levels.\nAlso check SMC_DCIN\/PBUS_VSENSE."}
{"post_id":69350,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-19 17:59:45","message":"following values with SMC bypass with battery and charger:\n\nCHGR_AMON 0.008v\nCHGR_BMON 0.001V\nSMC_DCIN_ISENSE 0V\nSMC_PBUS_VSENSE 2.2V"}
{"post_id":69352,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-19 18:32:48","message":"SMC_DCIN_VSENSE level?"}
{"post_id":69356,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-20 06:38:47","message":"that was a challenge to measure \nSMC_DCIN_VSENSE 2.65v,"}
{"post_id":69359,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-20 09:07:34","message":"That value is correct.\nPost now SMC_DCIN\/BMON_ISENSE.\n\nBTW, you've posted to CHGR_AMON values, with big difference; what happened?"}
{"post_id":69361,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-20 09:37:21","message":"In smc bypass mode with charger and battery connected and turned on 20v coming in:\n\nSMC_BMON_ISENSE 0.003v\nSMC_DCIN_ISENSE 0.005v\nCHGR_AMON 0.052v\nCHGR_BMON 0.000v\n\nIt was 0.05 but I wrote 0.5 before, my bad :\/"}
{"post_id":69368,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-20 17:07:07","message":"None of these values are strange.\nHowever there should be a problem with one (at least) SMC sensor, as the machine starts in SMC bypass mode.\nCheck first AVREF_SMC at C5021."}
{"post_id":69370,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-20 17:17:20","message":"PP3V0_S5_AVREF_SMC is solid 3V on C5021 and C5020"}
{"post_id":69382,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-21 05:14:25","message":"Check Power Sensors from pages 50-53."}
{"post_id":69385,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2020-12-21 07:21:54","message":"PP3V3_S0_LEFT = 0v                     \nPP3V3_S4SW_SNS = 0v                   \nEADC1_TBT_T_ISENSE 0v\nEADC1_PP5V_T139_ISENSE = 0v                 \nEADC1_TBT_X_ISENSE = 0v\n\nAre they supposed to be high when indicating fault?"}
{"post_id":69386,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2020-12-21 09:07:25","message":"Some sensors are enabled only when board is on.\nEspecially ISENSE type, as S4-0 voltages too.\n\nIf the machine tries to start in normal mode (at least pulsing voltages) and only starts in SMC bypass mode, then should check all sensors in SMC bypass mode."}
{"post_id":70009,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":28229,"username":"BoKKeR","post_date":"2021-01-07 15:53:23","message":"Could you help which sensor to check? I only found those 5 I mentioned above."}
{"post_id":70011,"thread_id":60250,"title":"820-00281a power cycle with battery. slow 20v","user_id":682,"username":"2informaticos","post_date":"2021-01-07 15:57:49","message":"Check pages 51-53..."}
