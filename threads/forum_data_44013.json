{
    "instruction": "[INST] Analyze this file to learn MacBook motherboard repair. The 'definitions' section explains key technical terms. The 'threads' section contains real-world repair discussions. Use both sections to understand and learn how to troubleshoot MacBook issues. Posts from username 'larossmann' , 'dukefawks' , and '2informaticos' are posts from trusted experts.[/INST]",
    "definitions": {
        "820-3332": "What is 820-3332? a LOGIC BOARD PART NUMBER.",
        "U7000": "What is U7000? U7000 refers to the ISL6258 or ISL6259 charging IC on Macbooks from 2008-2012.",
        "PPBUS_G3H": "What is PPBUS_G3H? Main system power rail that charges the battery, or is power from the battery, that everything else is powered from. .",
        "C7561": "What is C7561? a CAPACITOR.",
        "Q7035": "What is Q7035? a TRANSISTOR.",
        "ISL6259": "What is ISL6259? This is a charging chip for Macbook motherboards from 2010 through 2015.",
        "R7085": "What is R7085? a RESISTOR.",
        "R7080": "What is R7080? a RESISTOR.",
        "R7020": "What is R7020? Current sense shunt resistor for the charger, the resistors between this and the ISL6259 should be proper rating or else machine will turn off the charger. Measuring pins 27/28 on ISL6259 should give you 20.02 ohms. .",
        "R7051": "What is R7051? Current sense resistor between battery current sense shunt resistor and ISL6259. When these resistors fail the ISL6259 cannot gauge how much current is being sent to or drawn from the battery, which will cause the ISL6259 to stop drawing/sending power to the battery as a safety precaution. Symptoms are low voltage on PPBUS_G3H, quarter fan spin, boot looping, or battery not charging..",
        "R7021": "What is R7021? Current sense resistor between charger current sense shunt resistor and ISL6259. When these resistors fail the ISL6259 cannot gauge how much current is being drawn from the charger, which will cause the ISL6259 to stop drawing power from the charger as a safety precaution. Symptoms are low voltage on PPBUS_G3H around 4v, quarter fan spin, or battery not charging..",
        "R7050": "What is R7050? Current sense shunt resistor for the battery, the resistors between this and the ISL6259 should be proper rating or else machine will turn off the charger. Measuring pins 17/18 on ISL6259 should give you 2.02 ohms. .",
        "R7052": "What is R7052? Current sense resistor between battery current sense shunt resistor and ISL6259. When these resistors fail the ISL6259 cannot gauge how much current is being sent to or drawn from the battery, which will cause the ISL6259 to stop drawing/sending power to the battery as a safety precaution. Symptoms are low voltage on PPBUS_G3H, quarter fan spin, boot looping, or battery not charging..",
        "R7022": "What is R7022? Current sense resistor between charger current sense shunt resistor and ISL6259. When these resistors fail the ISL6259 cannot gauge how much current is being drawn from the charger, which will cause the ISL6259 to stop drawing power from the charger as a safety precaution. Symptoms are low voltage on PPBUS_G3H around 4v, quarter fan spin, or battery not charging..",
        "R7086": "What is R7086? a RESISTOR.",
        "R7081": "What is R7081? a RESISTOR.",
        "PPDCIN_G3H": "What is PPDCIN_G3H? PPDCIN_G3H Is a power rail that comes directly from the laptop charger..",
        "CHGR_AGATE": "What is CHGR_AGATE? a SIGNAL.",
        "CHGR_AGATE_DIV": "What is CHGR_AGATE_DIV? a SIGNAL.",
        "D6950": "What is D6950? a DIODE."
    },
    "threads": [
        {
            "post_id": 44013,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2018-12-28 04:30:59",
            "message": "Hi!\n\n\nI'm writing the whole story, may it contains additional valuable information.\n\nOne day, my macbook pro just switched off while working on it. Nothing trivial helped.\nFortunately I have a decent electronics lab at home.\n\n<SIGNAL>PPBUS_G3H</SIGNAL> was missing, because <TRANSISTOR>Q7035</TRANSISTOR> continuously shorted it to ground.\nSome reflow with hot air and cleaning with IPA, around <CHIP>U7000</CHIP> restored the <SIGNAL>PPBUS_G3H</SIGNAL> and machine turned on.\n\nA few seconds later, the <CAPACITOR>C7561</CAPACITOR> cap was started smoking, I've measured a few ohms of permanent resistance on that cap, so I've replaced it (I had only a 100 uF in a same package at home, so I've used that, instead of a 68 uF).\n\nAfter that the machine started successfully, MacOS booted, etc. \n\n\nThe only issue is the battery.\nMy charging light turns to orange even there is no battery connected at all. When I connect it to the charger, it turns green immediately and after a second it changes to orange.\nIf I connect the battery, the machine doesn't recognize it (X battery icon), but also have an orange light.\nI've done SMC / PRAM reset already of course.\n\nBut with every 8-10th startup the machine randomly recognizes the battery, displays its percent (29%), but can't charge it and tells me to replace it immediately, unfortunately if I remove the magsafe adapter, the machine turns off immediately.\nI had a replacement battery also, which is also doing the same.\n\n\nThanks"
        },
        {
            "post_id": 44017,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 1153,
            "username": "JohnB8812",
            "post_date": "2018-12-28 06:06:02",
            "message": "Voltage on <SIGNAL>PPBUS_G3H</SIGNAL> with just the charger no battery?"
        },
        {
            "post_id": 44020,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2018-12-28 06:23:45",
            "message": "<SIGNAL>PPBUS_G3H</SIGNAL> with charge w/o battery: 12.51V which is somewhat lower than the expected 12.80V, but I think it's acceptable."
        },
        {
            "post_id": 44021,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 682,
            "username": "2informaticos",
            "post_date": "2018-12-28 06:41:47",
            "message": "<SIGNAL>PPBUS_G3H</SIGNAL> is correct; no idea why you assume 12.8V!\n\nSince 2013 all MacBooks turns MagSafe light to amber, even no battery connected.\nLight goes green only if battery is 100% fully charged.\n\nPost exact value of resistance between pins 17/18 and 27/28 of <CHIP>ISL6259</CHIP>.\nAlso post voltage at its pins 9 & 15.\nDid you try original 85W charger?\n\nPost <RESISTOR>R7080</RESISTOR>/81 and <RESISTOR>R7085</RESISTOR>/86 values measured onboard (ohm scale, no power)."
        },
        {
            "post_id": 44026,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 1153,
            "username": "JohnB8812",
            "post_date": "2018-12-28 07:31:45",
            "message": "Yep next thing to check is resistance between pins 17/18 and 27/28 of the ISL. If it is 12.51, your machine SHOULD be recognizing batteries"
        },
        {
            "post_id": 44030,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2018-12-28 08:55:24",
            "message": "[B]1.[/B]\n<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A is a logic board for MBP retina 2012 mid, 15\", 2.3 Ghz, 8 GB RAM (first rMBP)\nSo it's before 2013.\nI don't know when should it show an amber/orange light.\n\n\n[B]2. [/B]\nISL 17, 18 pin, battery current sensing: 3.9 ohm\nISL 27, 28 pin, pwr supply current sensing: 21.3 ohm\n\nby my calculations,\n\n17, 18 should be:\n2.2 + 0.005 + 0 = 2.205 ohm (+1.695 ohm diff)\n\n27, 28 should be:\n10 + 10 + 0.020 = 20.02 ohm (+1.28 ohm diff)\n\nI used gold probes and negating the extra resistance on my probes, of course.\n\nI've done some calculations about the possible resistance of PCB traces, and it should be between around 0.5 - 2 ohm, so these can be right values.\n\nAlso tested the intermediate values, so\nbtr current sensing:\n<RESISTOR>R7051</RESISTOR>: 2.2 Ohm (should be, 2.2 ohm, 5%)\n<RESISTOR>R7052</RESISTOR>: 0.1 Ohm (should be, 0 ohm, 5%) \n<RESISTOR>R7050</RESISTOR>: 0.0 Ohm (should be, 0.005 ohm)\n\npower supply current sensing:\n<RESISTOR>R7021</RESISTOR>: 9.8 ohm (should be, 10 ohm, 5%)\n<RESISTOR>R7022</RESISTOR>: 10.1 ohm (should be, 10 ohm, 5%)\n<RESISTOR>R7020</RESISTOR>: 0.0 Ohm (should be, 0.020 ohm)\n\nAside from the measurement inaccuracy, everything in spec. I used Fluke 87V, currently I have no ready-to-use equipment that can measure low resistance precisely.\n\n\n[B]3.[/B]\nI'm using my genuine apple 85W charger as always.\n\n\n[B]4.[/B]\nI may have a theory, both of my batteries can be bad.\n- The first battery had one cell which is swollen a bit, it was in my machine when it died (also had the replace the battery warning for days)\n- The second was never used before, I've bought it to replace my old one, because of the warnings."
        },
        {
            "post_id": 44031,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 682,
            "username": "2informaticos",
            "post_date": "2018-12-28 09:23:24",
            "message": "Check resistance to ground (diode mode, red probe to ground) for SCL/SDA lines of battery bus.\nBe sure to have good solders on <CHIP>ISL6259</CHIP>.\n\nDon't bother with exact resistors value; 10% error is OK for our readings, even for voltage.\n\nShould be good to test known good battery; or test one of your batteries in other machine..."
        },
        {
            "post_id": 44032,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2018-12-28 09:23:44",
            "message": "[B]5.[/B]\nISL pin 9 - GND: 0.298V\nISL pin 15 - GND: 0.042V\n(/w power supply + battery)\n\n<RESISTOR>R7080</RESISTOR>: 99.6k\n<RESISTOR>R7081</RESISTOR>: 61.7k\n\n<RESISTOR>R7085</RESISTOR>: 391.4k \n<RESISTOR>R7086</RESISTOR>: 306.9k"
        },
        {
            "post_id": 44035,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 682,
            "username": "2informaticos",
            "post_date": "2018-12-28 09:32:09",
            "message": "\"Check resistance to ground (diode mode, red probe to ground) for SCL/SDA lines of battery bus.\"\n???"
        },
        {
            "post_id": 44036,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2018-12-28 09:32:38",
            "message": "Check resistance to ground (diode mode, red probe to ground) for SCL/SDA lines of battery bus.\n-> it's 0.530 in diode mode\n\nBe sure to have good solders on <CHIP>ISL6259</CHIP>.\n-> because at the first a quick reflow fixed my <SIGNAL>PPBUS_G3H</SIGNAL> voltage, it can be still an issue.\nI'll remove the <CHIP>ISL6259</CHIP>, clean the pads and resolder it tomorrow, if no *easier* option will come until"
        },
        {
            "post_id": 44042,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2018-12-28 10:10:28",
            "message": "I had a little time, so I've removed, cleaned and resoldered <CHIP>ISL6259</CHIP>, but it's still the same."
        },
        {
            "post_id": 44043,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 682,
            "username": "2informaticos",
            "post_date": "2018-12-28 10:12:32",
            "message": "Do you have .530 on both lines?\nLess than 1% difference is required...\n\nCheck again <RESISTOR>R7085</RESISTOR>/86.\nInvert probes and take readings in both ways.\n\nPost voltage for pin 26/<CHIP>U7000</CHIP>.\n\n\"But with every 8-10th startup the machine randomly recognizes the battery\"\nThis can mean cracked solders/traces, especially underneath SMC.\nPull it out and reball; with leaded balls, of course."
        },
        {
            "post_id": 44049,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2018-12-28 10:45:53",
            "message": "I've measured it again\nSDA: 0.526\nSCL: 0.528 \nwhich is round 0.4% difference, so it's below 1%\n\n\n<RESISTOR>R7086</RESISTOR>\n<SIGNAL>CHGR_AGATE_DIV</SIGNAL> (+), <SIGNAL>PPDCIN_G3H</SIGNAL> (-): 307.2 k\n<SIGNAL>CHGR_AGATE_DIV</SIGNAL> (-), <SIGNAL>PPDCIN_G3H</SIGNAL> (+): 325.4 k\n\n<RESISTOR>R7085</RESISTOR>\n<SIGNAL>CHGR_AGATE_DIV</SIGNAL> (+), <SIGNAL>CHGR_AGATE</SIGNAL> (-): 485.5 k\n<SIGNAL>CHGR_AGATE_DIV</SIGNAL> (-), <SIGNAL>CHGR_AGATE</SIGNAL> (+): 391.2 k\n\n\n26/<CHIP>U7000</CHIP> voltage: 0.023 V \n\n\nI'll try to get an another battery for testing, I'd like to spend my time on reballing the SMC on the last resort :)\n\nAnyway thanks for your sustained and thorough help!"
        },
        {
            "post_id": 44118,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2018-12-29 09:51:52",
            "message": "After\n- doing some reflow/cleaning around the SMC (not complete reballing)\n- one of the pins of my battery connector was bent a little bit, so restored it\n- doing PRAM / SMC reset\nthe machine reliably recognises my new battery.\n\nMy old battery is not recognized at all, but it was in a 'Replace now' state before and had degraded capacity, so it can be dead at all.\n\nTo check the details I've soldered probe wires to battery connectors i2c SDL/SCL lines (to the legs of <DIODE>D6950</DIODE> diode pair) and checked it with my oscilloscope.\nMy old battery didn't produce any valid traffic on it, but my new one has valid i2c communication over it. \n\n\nThis is the output of System information with the new battery:\n\n[FONT=courier new][B]Battery Information:[/B]\nModel Information:\n  Serial Number: D863105Q0TAF9Y2A5\n  Manufacturer: SMP\n  Device Name: bq20z451\n  Pack Lot Code: 0\n  PCB Lot Code: 0\n  Firmware Version: 511\n  Hardware Revision: 000a\n  Cell Revision: 1150\nCharge Information:\n  Charge Remaining (mAh): 2579\n  Fully Charged: No\n  Charging: No\n  Full Charge Capacity (mAh): 8500\nHealth Information:\n  Cycle Count: 0\n  Condition: Replace Now\nBattery Installed: Yes\nAmperage (mA): 0\nVoltage (mV): 11254[/FONT]\n\nCan be any issue left on the logic board, that can cause this battery error? Or should it be the battery exclusively?\nBecause of the new year / weekend I can only get a new battery to test on next Wednesday."
        },
        {
            "post_id": 44119,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 682,
            "username": "2informaticos",
            "post_date": "2018-12-29 09:56:07",
            "message": "If you get proper I2C communication on the battery bus, is time to test new one; or known good one, even older.\nSMC should be OK, as is the master on that bus, and it starts the communication..."
        },
        {
            "post_id": 44871,
            "thread_id": 44013,
            "title": "<LOGIC BOARD PART NUMBER>820-3332</LOGIC BOARD PART NUMBER>-A , orange light, but battery's not charging",
            "user_id": 2162,
            "username": "zarmin",
            "post_date": "2019-01-16 03:58:15",
            "message": "Just wanted to tell, a new battery is working well. Both of my previous batteries were bad. \nSo my machine is working completely fine now. \n\nThanks for all of your help!"
        }
    ]
}