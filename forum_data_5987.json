[
    {
        "post_id":5987,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-25 15:01:25",
        "message":"820-3787 liquid damage, very recent no corrosion.\n\nCustomer says they heared a pop and that was it, no power.\n\nAll S5 fluctiuating.\nP3V3S5_EN = On \/ Off\nP5VS5_EN = On \/ Off\n\nSchematic is leading me back to the SMC"
    },
    {
        "post_id":5990,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-25 18:04:26",
        "message":"PPBUS stable and at what voltage?"
    },
    {
        "post_id":5992,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-25 18:17:58",
        "message":"PPBUS_G3H is 12V steady.\nPP3V42 is steady 3.42\n\nTried injecting 3.3V into 3v3 and 5v S5 enables just to see what happens. Got 5V S5 rail but no 3V S5 and again, no S0... Thought it could be worth a shot but no cigar.\nRemoved the wire now."
    },
    {
        "post_id":6000,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":36,
        "username":"aprendiz",
        "post_date":"2016-08-25 19:29:50",
        "message":"PPBUS_G3H should be 12.6V....."
    },
    {
        "post_id":6001,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-25 19:36:09",
        "message":"[QUOTE=\"aprendiz, post: 6000\"]PPBUS_G3H should be 12.6V.....[\/QUOTE]\n\nYes, sorry it's 12.6v exactly."
    },
    {
        "post_id":6011,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-26 03:11:56",
        "message":"Resistance to GND on 3V3_S5 bus? Was there corrosion around U7501?"
    },
    {
        "post_id":6018,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-26 04:23:11",
        "message":"[QUOTE=\"dukefawks, post: 6011\"]Resistance to GND on 3V3_S5 bus? Was there corrosion around U7501?[\/QUOTE]\n\nWhat point should I measure from? EDIT:  3v3_s5 shows up all over. Not sure where you want me to take a measurement from.\nAbsoluetly no corrosion at all. spill only 2 weeks ago"
    },
    {
        "post_id":6025,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":36,
        "username":"aprendiz",
        "post_date":"2016-08-26 07:47:46",
        "message":"Duke said 3V3_[COLOR=#FF0000]S5[\/COLOR] bus not S3, measurement can be taken at any point where 3V3_S5 bus is present....."
    },
    {
        "post_id":6026,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-26 07:55:57",
        "message":"From PP3V3_S5_REG to ground = ~ 16K\nJust noticed that PP3V3_S5_SMC (connecting to SMC_WAKE_L through 1M R5002) = 1.2v .... This isn't right is it?\n\nSorry, feeling my way in the dark here"
    },
    {
        "post_id":6027,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-26 07:56:32",
        "message":"[QUOTE=\"aprendiz, post: 6025\"]Duke said 3V3_[COLOR=#FF0000]S5[\/COLOR] bus not S3, measurement can be taken at any point where 3V3_S5 bus is present.....[\/QUOTE]\n\nSorry, typo I ment S5. I understand S5 is off state and S3 is one of the sleeps. S5 will be on while machine is off.... I just hit the wrong number key. Will have to be sure to read everything with care before I hit the post button.\n\nThanks\n\nFrom PP3V3_S5_REG to ground = ~ 16K"
    },
    {
        "post_id":6038,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-26 12:53:38",
        "message":"[QUOTE=\"dukefawks, post: 6011\"]Resistance to GND on 3V3_S5 bus? Was there corrosion around U7501?[\/QUOTE]\n\nYes, sorry it's 12.6v exactly.\nFrom PP3V3_S5_REG to ground = 16K"
    },
    {
        "post_id":6056,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-26 16:21:56",
        "message":"PP3v3_s5_SMC should be 3.42V as it comes straight from 3V42 bus. So pin 1 of R5002 should have 3.42V"
    },
    {
        "post_id":6066,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-26 18:37:46",
        "message":"[QUOTE=\"dukefawks, post: 6056\"]PP3v3_s5_SMC should be 3.42V as it comes straight from 3V42 bus. So pin 1 of R5002 should have 3.42V[\/QUOTE]\n\nThank you for taking the time to reply to help\n\nI was being a F* moron and probing the wrong point. 3V42 is good.\n\n3v3_S5 and 5V_S5 both kick out the right voltage for a split second as the enable signal is sent from SMC but when injecting enable signals, only 5V_S0 turns on (tripple chacked I was probing the right point) so if 3v3_S5 was being pulled low for some reason then there would not be 3v3 at any point right.\n\nThere must be [I]something [\/I]telling the SMC to turn off the S5 enable surely?\n\nI tried probing at U5110, U8130 in case they play any part.\n\nNot a clue what's going on here... Not a F*ing danny"
    },
    {
        "post_id":6069,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-26 21:37:45",
        "message":"I removed TPS51980 just to see what would happen to the enable signals. Signals are steady after removing the 51980 chip. Guessing something is turning on and telling the SMC to stop the enable signals."
    },
    {
        "post_id":6080,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-27 10:12:25",
        "message":"Replace it with a known good one now."
    },
    {
        "post_id":6088,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-27 12:37:33",
        "message":"[QUOTE=\"dukefawks, post: 6080\"]Replace it with a known good one now.[\/QUOTE]\n\nTried that, still the same thng... So then I removed Q8020 controlling PP3V3_SUS_FET rail and 3v3_S5 is stable. when Q8020 is on the board (or off) there is no power getting to the SPI ROM. I went through every single resistor and capacitor and IC removing systematically replacing everything on node 141 (or \"short\") in TestLink. I'll try removing Q8002 which controls the Q8020 gate just to see what happens.\n\nI tried jumpering 3v42 over to SPI ROM VDD (which is on node 141) directly from PP3V42 but just ended in 3V42 pulled low and (obviously) no green \/ orange MagSafe."
    },
    {
        "post_id":6093,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-27 13:14:28",
        "message":"Isn't the board trying to power on and running into a short and shutting down? Are any of the S0 busses coming high for a second?"
    },
    {
        "post_id":6095,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-27 13:23:48",
        "message":"[QUOTE=\"dukefawks, post: 6080\"]Replace it with a known good one now.[\/QUOTE]\n\nTried that still the same thng...\n\nI tried jumpering 3v42 over to SPI ROM VDD (which is on node 141) directly from PP3V42 but just ended in 3V42 pulled low and (obviously) no green \/ orange MagSafe.\n\nSo then I removed Q8020 controlling PP3V3_SUS_FET rail and 3v3_S5 directly from U7501 is stable. When Q8020 is on the board (or off the board) there is no power getting to the SPI ROM (pni 8 VDD on node 141). I'll try removing Q8002 which controls the Q8020 gate to see what happens.\n\nI went through every single resistor and capacitor and IC systematically removing everything on node 141 testing 3v3_s5 & enables and then replacing the part. I did this to check for anything pulling that node low or maybe a bad cap but no joy."
    },
    {
        "post_id":6096,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-27 13:26:50",
        "message":"I don't have any  A143DJ mosfets or anything else in the right package so I've ordered in a batch from mouser.\nWill have to wait a couple days to see if i makes any difference to replace them."
    },
    {
        "post_id":6102,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-27 15:01:15",
        "message":"I have no idea what you are trying to do but did you check PP3V3SUS_EN comes high? If yes it should pull the gate of Q8020 to pretty much 0V."
    },
    {
        "post_id":6113,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-27 17:02:06",
        "message":"[QUOTE=\"dukefawks, post: 6102\"]I have no idea what you are trying to do[\/QUOTE]\n\nYeah, that would be a fair comment.\n\n[QUOTE=\"dukefawks, post: 6102\"] you check PP3V3SUS_EN comes high? If yes it should pull the gate of Q8020 to pretty much 0V.[\/QUOTE]\n\nPP3V3SUS_EN only shows up if Q8002 is removed. When Q8002 is on the board the voltage at Q8002 gate changes by a couple hunded millivolts and Q8020 gate goes high low high low."
    },
    {
        "post_id":6115,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-27 18:07:21",
        "message":"What should I be testing as the cause of this on off S5 rail problem do you think?"
    },
    {
        "post_id":6120,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-28 01:21:30",
        "message":"You didn't answer the question from post #17. The board is power cycling and I bet all S0 busses are coming high for a second. Check closer."
    },
    {
        "post_id":6121,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-28 06:25:20",
        "message":"[QUOTE=\"dukefawks, post: 6120\"]You didn't answer the question from post #17. The board is power cycling and I bet all S0 busses are coming high for a second. Check closer.[\/QUOTE]\n\nPP5V_S0 = 217mV\n3.7k to ground\n\nPP3V3_S0 = 200mV\n9.2k to ground"
    },
    {
        "post_id":6124,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-28 13:04:45",
        "message":"Are they pulsing? Most multimeters are too slow to catch it, better to use a scope."
    },
    {
        "post_id":6135,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-28 20:56:24",
        "message":"[QUOTE=\"dukefawks, post: 6124\"]Are they pulsing? Most multimeters are too slow to catch it, better to use a scope.[\/QUOTE]\n\nThey are indeed pulsing.\n\nPP3V3_S0 by ~ 2.5V\nPP5V_S0 by ~ 500mV"
    },
    {
        "post_id":6139,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-29 02:17:40",
        "message":"Is CPU Vcore pulsing too? Check all coils for shorts."
    },
    {
        "post_id":6145,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-29 09:59:03",
        "message":"[QUOTE=\"dukefawks, post: 6139\"]Is CPU Vcore pulsing too? Check all coils for shorts.[\/QUOTE]\n\nNo voltage on vcore at all, not even a spike on the scope.\n\nDiode DMM\nL7310, L7320, L7330, L9360, L9330 = 0.005V drop to ground\nL7520 = 0.000"
    },
    {
        "post_id":6154,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":2,
        "username":"dukefawks",
        "post_date":"2016-08-29 15:25:05",
        "message":"Uhm, there is a short to GND on L7520? That is at least one problem to fix first. Inject some voltage and see what heats up."
    },
    {
        "post_id":6162,
        "thread_id":5987,
        "title":"[SOLVED]820-3787 unstable S5 enables",
        "user_id":316,
        "username":"G.Beard",
        "post_date":"2016-08-29 19:29:06",
        "message":"Wow, what a prize fucking moron I am... Ahh jeez. Yes, clearly short to ground but I spent ages searching for the problem going through the schematic around in circles and you say, test S0 rails, check for a short, throw in some watts and see what burns your fingers.... And it's fixed! :) Thanks for sticking with me.\n\nIt was a cap USB switch."
    }
]